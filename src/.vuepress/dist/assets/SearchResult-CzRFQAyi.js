import{i as U,l as V,m as Q,p as Y,q as z,s as G,v as J,j as w,x as d,k as e,y as K,z as N,A as W,R as X,B as Z,C as ee,D as te,E as ae,G as se,H as Ee,I as le,J as re,K as oe,L as ue,M as ce,N as Be,O as ie,P as ne,Q as Ae,S as L,T as he,U as y}from"./app-DFI261Wu.js";const me=["/about.html","/","/datastruct/%E5%88%86%E5%B8%83%E5%BC%8F%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95.html","/demo/disable.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/demo/","/%E4%BC%98%E7%A7%80%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81/C__%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%88%86%E4%BA%AB.html","/posts/cherry.html","/posts/dragonfruit.html","/posts/strawberry.html","/posts/tomato.html","/posts/%E4%BD%BF%E7%94%A8VuePress%E6%9E%84%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E7%BD%91%E7%AB%99.html","/%E6%95%99%E7%A8%8B/HTTP/http%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%20copy%202.html","/%E6%95%99%E7%A8%8B/HTTP/http%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%20copy.html","/%E6%95%99%E7%A8%8B/HTTP/http%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A.html","/%E6%95%99%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1%20copy%202.html","/%E6%95%99%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1%20copy.html","/%E6%95%99%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1.html","/posts/apple/1.html","/posts/apple/2.html","/posts/apple/3.html","/posts/apple/4.html","/posts/banana/1.html","/posts/banana/2.html","/posts/banana/3.html","/posts/banana/4.html","/%E6%95%99%E7%A8%8B/HTTP/HTTP2/http%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%20copy%202.html","/%E6%95%99%E7%A8%8B/HTTP/HTTP2/http%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%20copy.html","/%E6%95%99%E7%A8%8B/HTTP/HTTP2/http%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A.html","/404.html","/datastruct/","/%E4%BC%98%E7%A7%80%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81/","/posts/","/%E6%95%99%E7%A8%8B/HTTP/","/%E6%95%99%E7%A8%8B/","/%E6%95%99%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/posts/apple/","/posts/banana/","/%E6%95%99%E7%A8%8B/HTTP/HTTP2/","/category/","/category/%E5%88%86%E5%B8%83%E5%BC%8F/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81/","/category/%E6%A8%B1%E6%A1%83/","/category/%E7%81%AB%E9%BE%99%E6%9E%9C/","/category/%E6%B0%B4%E6%9E%9C/","/category/%E8%8D%89%E8%8E%93/","/category/%E8%94%AC%E8%8F%9C/","/category/%E5%BB%BA%E7%AB%99/","/category/vuepress/","/category/http/","/category/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/category/%E8%8B%B9%E6%9E%9C/","/category/%E9%A6%99%E8%95%89/","/tag/","/tag/%E5%88%86%E5%B8%83%E5%BC%8F/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81/","/tag/%E7%BA%A2/","/tag/%E5%B0%8F/","/tag/%E5%9C%86/","/tag/%E5%A4%A7/","/tag/%E5%BB%BA%E7%AB%99/","/tag/vuepress/","/tag/http/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/tag/%E9%BB%84/","/tag/%E5%BC%AF%E6%9B%B2%E7%9A%84/","/tag/%E9%95%BF/","/article/","/star/","/timeline/"],pe="SLIMSEARCH_QUERY_HISTORY",m=L(pe,[]),ve=()=>{const{queryHistoryCount:s}=y;return{enabled:s>0,queryHistories:m,addQueryHistory:c=>{m.value=Array.from(new Set([c,...m.value.slice(0,s-1)]))},removeQueryHistory:c=>{m.value=[...m.value.slice(0,c),...m.value.slice(c+1)]}}},q=s=>me[s.id]+("anchor"in s?`#${s.anchor}`:""),de="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:ye}=y,v=L(de,[]),ge=()=>({enabled:ye>0,resultHistories:v,addResultHistory:u=>{},removeResultHistory:u=>{v.value=[...v.value.slice(0,u),...v.value.slice(u+1)]}}),Ce=s=>{const u=re(),c=Q(),g=oe(),E=w(0),p=d(()=>E.value>0),A=ue([]);return ce(()=>{const{search:C,terminate:H}=Be(),T=ne(r=>{const{resultsFilter:D=B=>B,querySplitter:b,suggestionsFilter:o,...l}=u.value;r?(E.value+=1,C(r,c.value,l).then(B=>D(B,r,c.value,g.value)).then(B=>{E.value-=1,A.value=B}).catch(B=>{console.warn(B),E.value-=1,E.value||(A.value=[])})):A.value=[]},y.searchDelay-y.suggestDelay,{maxWait:5e3});ie([s,c],([r])=>T(r.join(" "))),Ae(()=>{H()})}),{isSearching:p,results:A}};var Te=U({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:u}){const c=V(),g=Q(),E=Y(z),{addQueryHistory:p,queryHistories:A,removeQueryHistory:C}=ve(),{resultHistories:H}=ge(),T=G(s,"queries"),{results:r,isSearching:D}=Ce(T),b=J({isQuery:!0,index:0}),o=w(0),l=w(0),B=d(()=>A.value.length>0||H.value.length>0),f=d(()=>r.value.length>0),F=d(()=>r.value[o.value]||null),k=()=>{o.value=o.value>0?o.value-1:r.value.length-1,l.value=F.value.contents.length-1},x=()=>{o.value=o.value<r.value.length-1?o.value+1:0,l.value=0},$=()=>{l.value<F.value.contents.length-1?l.value+=1:x()},I=()=>{l.value>0?l.value-=1:k()},P=t=>t.map(a=>he(a)?a:e(a[0],a[1])),_=t=>{if(t.type==="customField"){const a=ae[t.index]||"$content",[h,n=""]=se(a)?a[g.value].split("$content"):a.split("$content");return t.display.map(i=>e("div",P([h,...i,n])))}return t.display.map(a=>e("div",P(a)))},R=()=>{o.value=0,l.value=0,u("updateQuery",""),u("close")},j=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},E.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},A.value.map((t,a)=>{const h=b.isQuery&&b.index===a;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{u("updateQuery",t)}},e("div",[e(Ee,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:E.value.remove,"aria-label":E.value.remove,innerHTML:le,onClick:n=>{n.preventDefault(),n.stopPropagation(),C(a)}})]))}))])),M=()=>null;return K("keydown",t=>{if(s.isFocusing&&f.value){if(t.key==="ArrowUp")I();else if(t.key==="ArrowDown")$();else if(t.key==="Enter"){const a=F.value.contents[l.value];p(s.queries.join(" ")),c.push(q(a)),R()}}}),N([o,l],()=>{var t;(t=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:s.queries.length?!f.value:!B.value}]},s.queries.length?D.value?e(W,{hint:E.value.searching}):f.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},r.value.map(({title:t,contents:a},h)=>{const n=o.value===h;return e("div",{class:["slimsearch-record",{active:n}],role:"group","aria-selected":n},[e("div",{class:"slimsearch-record-title"},t||E.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},a.map((i,O)=>{const S=n&&l.value===O;return e("li",{class:["slimsearch-record-matches",{active:S}],role:"option","aria-selected":S},e(X,{to:q(i),onClick:()=>{p(s.queries.join(" ")),R()}},()=>[i.type==="text"?null:e(i.type==="title"?Z:i.type==="heading"?ee:te,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[i.type==="text"&&i.header?e("div",{class:"slimsearch-record-content-header"},i.header):null,e("div",_(i))])]))}))])})):E.value.emptyResult:B.value?[j(),M()]:E.value.emptyHistory)}});export{Te as default};
