import{useRevealJs as b}from"@temp/revealjs/index.js";import{decodeData as J,LoadingIcon as C}from"@vuepress/helper/client";import{inject as _,isRef as k,ref as v,computed as c,defineComponent as P,shallowRef as j,h as i,onMounted as E,watch as L,onUnmounted as U}from"vue";import{usePageFrontmatter as $,usePageLayout as q,onContentUpdated as x}from"vuepress/client";import"./styles/reveal-js.css";import{watchImmediate as p}from"@vueuse/core";import{isFunction as A}from"vuepress/shared";const n=v({}),f=Symbol(__VUEPRESS_DEV__?"revealjs":""),D=e=>{k(e)?p(()=>e.value,a=>{n.value=a}):A(e)?p(c(e),a=>{n.value=a}):n.value=e},g=()=>_(f),F=e=>{e.provide(f,n)},I=P({name:"RevealJs",props:{id:{type:String,required:!0},code:{type:String,required:!0},theme:{type:String,default:"auto"}},setup(e){const a=g(),h=$(),w=q(),o=v(!0),s=j(),l=c(()=>J(e.code));let u=null;const y=async t=>{const[R,...S]=await b(),r=w.value.name==="SlidePage",m=new R(t,{backgroundTransition:"slide",transition:"slide",slideNumber:!0,...a.value,hash:r,mouseWheel:r,...h.value.revealJs,embedded:!r,keyboardCondition:r?null:"focused",markdown:{separator:`^\r?\\n---\r?
$`,verticalSeparator:`^\r?
--\r?
$`},plugins:[S,a.value.plugins??[]].flat()});return await m.initialize(),m},d=async()=>{const t=s.value;t&&(t.setAttribute("id",e.id),t.setAttribute("data-theme",e.theme),o.value=!0,u=await y(t),o.value=!1)};return x(async t=>{t==="mounted"&&await d()}),E(()=>{L(l,d,{flush:"post"})}),U(()=>{u?.destroy()}),()=>i("div",{class:"vp-reveal"},[i("div",{ref:s,class:["reveal","reveal-viewport"]},i("div",{class:"slides",innerHTML:`<section data-markdown><script type="text/template">${l.value}<\/script></section>`})),o.value?i(C,{class:"reveal-loading",height:400}):null])}});export{I as RevealJs,D as defineRevealJsConfig,F as injectRevealJsConfig,g as useRevealJsConfig};
//# sourceMappingURL=index.js.map
