import{usePageData as U,useRouteLocale as j,useSiteLocaleData as P,defineClientConfig as R}from"vuepress/client";import{startsWith as F,useLocaleConfig as g,useKeys as G,checkIsMacOS as W,checkIsIOS as Y,checkIsiPad as $}from"@vuepress/helper/client";import{ref as h,computed as f,watch as T,onMounted as w,onUnmounted as O,defineComponent as E,h as e,shallowRef as M,defineAsyncComponent as q}from"vue";import{u as x,c as B,l as k,o as b,i as Q}from"./index-CoHE-pvH.js";import{c as D,C as z,S as J}from"./icons-DxmX1gti.js";import"./styles/search-box.css";import{useToggle as V,useSupported as X,watchImmediate as H,useScrollLock as Z,useEventListener as ee,onClickOutside as ae,useDebounceFn as le}from"@vueuse/core";import"./styles/search-modal.css";import"vuepress/shared";let se=null;const K=()=>se??=V(),te=(a,r=!1)=>{const t=h(0),o=f(()=>a.value[t.value]),i=()=>{t.value=t.value>0?t.value-1:a.value.length-1},l=()=>{t.value=t.value<a.value.length-1?t.value+1:0};return T(a,()=>{r||(t.value=0)}),{index:t,item:o,prev:i,next:l}},re=()=>{const a=X(()=>typeof window<"u"&&"userAgent"in window.navigator);return f(()=>a.value&&/\b(?:Android|iPhone)/i.test(navigator.userAgent))},oe=/[\u4e00-\u9fff\u3400-\u4dbf\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/,ne=(a="")=>a.split(/\s+/).map(r=>{if(r.length>3){const t=r.split("");if(t.every(o=>oe.test(o)))return t}return r}).flat(),ue=a=>{const r=h([]);if(__SLIMSEARCH_SUGGESTION__){const t=x(),o=U(),i=j();w(()=>{const{suggest:l,terminate:c}=B(),C=u=>{const{resultsFilter:v,querySplitter:p,suggestionsFilter:y=n=>n,...S}=t.value;u.length>=3?l(u,i.value,S).then(n=>y(n,u,i.value,o.value)).then(n=>{r.value=n.length?F(n[0],u)&&!n[0].slice(u.length).includes(" ")?n:[u,...n]:[]}).catch(n=>{console.error(n)}):r.value=[]};H([a,i],([u])=>{C(u.join(" "))}),O(()=>{c()})})}return{enabled:__SLIMSEARCH_SUGGESTION__,suggestions:r}},ie='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',ce='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',ve='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',he='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',_=b.hotKeys[0];var pe=E({name:"SearchBox",setup(){const a=g(k),[r,t]=K(),o=h(!1);G(b.hotKeys,()=>{r.value||t()});const i=f(()=>_?[...(o.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((l,c)=>_[["ctrl","shift","alt","meta"][c]]),_.key.toUpperCase()]:null);return w(()=>{const{userAgent:l}=navigator;o.value=W(l)||Y(l)||$(l)}),()=>[e("button",{type:"button",class:"slimsearch-button","aria-label":a.value.search,onClick:()=>{t(!0)}},[e(D),e("div",{class:"slimsearch-placeholder"},a.value.search),i.value?e("div",{class:"slimsearch-key-hints"},i.value.map(l=>e("kbd",{class:"slimsearch-key"},l))):null])]}}),de=E({name:"SearchKeyHints",setup(){const a=g(k),r=re();return()=>r.value?null:e("div",{class:"slimsearch-hints"},[e("span",{class:"slimsearch-hint"},[e("kbd",{innerHTML:ie}),a.value.select]),e("span",{class:"slimsearch-hint"},[e("kbd",{innerHTML:ve}),e("kbd",{innerHTML:ce}),a.value.navigate]),e("span",{class:"slimsearch-hint"},[e("kbd",{innerHTML:he}),a.value.exit])])}});const me=q({loader:()=>import("./components/SearchResult.js"),loadingComponent:()=>{const a=g(k);return e(J,{class:"slimsearch-result-wrapper",hint:a.value.loading})}}),ge=["ArrowDown","ArrowUp","Escape","Tab","Enter"];var fe=E({name:"SearchModal",setup(){const[a,r]=K(),t=P(),o=g(k),i=x(),l=h(""),c=h([]),{enabled:C,suggestions:u}=ue(c),v=h(!1),{index:p,prev:y,next:S}=te(u),n=M(),I=M(),A=M(),N=Z(A.value),d=f(()=>C&&v.value&&u.value.length),L=(s=p.value)=>{l.value=u.value[s],v.value=!1};return ee("keydown",s=>{d.value?s.key==="ArrowUp"?y():s.key==="ArrowDown"?S():s.key==="Tab"?L():(s.key==="Enter"||s.key==="Escape")&&(v.value=!1):s.key==="Escape"&&r(!1)},{passive:!0}),ae(I,()=>{v.value=!1}),H(l,le(()=>(i.value.querySplitter?.(l.value)??Promise.resolve(ne(l.value))).then(s=>{c.value=s.filter(m=>m.length)}),Math.min(b.searchDelay,b.suggestDelay))),w(()=>{A.value=document.body,T(a,s=>{s&&n.value?.focus()},{flush:"post"})}),O(()=>{N.value=!1}),()=>a.value?e("div",{class:"slimsearch-modal-wrapper"},[e("div",{class:"slimsearch-mask",onClick:()=>{r(!1),l.value=""}}),e("div",{class:"slimsearch-modal"},[e("div",{class:"slimsearch-box"},[e("form",[e("label",{id:"slimsearch-label",for:"slimsearch-input","aria-label":o.value.search},e(D)),e("input",{ref:n,type:"search",class:"slimsearch-input",id:"slimsearch-input",placeholder:o.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${t.value.title}-search`,value:l.value,"aria-controls":"slimsearch-results",onKeydown:s=>{d.value&&ge.includes(s.key)&&s.preventDefault()},onInput:({target:s})=>{l.value=s.value,v.value=!0,p.value=0}}),l.value?e("button",{type:"reset",class:"slimsearch-clear-button",title:o.value.clear,"aria-label":o.value.clear,innerHTML:z,onClick:()=>{l.value=""}}):null,d.value?e("ul",{class:"slimsearch-suggestions",ref:I},u.value.map((s,m)=>e("li",{class:["slimsearch-suggestion",{active:m===p.value}],onClick:()=>{L(m)}},[e("kbd",{class:"slimsearch-auto-complete",title:`Tab ${o.value.autocomplete}`},"Tab"),s]))):null]),e("button",{type:"button",class:"slimsearch-close-button",onClick:()=>{r(!1),l.value=""}},o.value.cancel)]),e(me,{queries:c.value,isFocusing:!d.value,onClose:()=>{r(!1)},onUpdateQuery:s=>{l.value=s}}),e(de)])]):null}}),ke=R({enhance({app:a}){Q(a),a.component("SearchBox",pe)},rootComponents:[fe]});export{ke as default};
//# sourceMappingURL=config.js.map
