import{values as E}from"@vuepress/helper/client";import{watchImmediate as _}from"@vueuse/core";import{inject as d,computed as u,readonly as p,ref as g,isRef as w}from"vue";import{useRouteLocale as h}from"vuepress/client";import{isFunction as v}from"vuepress/shared";const f=__SLIMSEARCH_CUSTOM_FIELDS__,m=__SLIMSEARCH_OPTIONS__,j=__SLIMSEARCH_LOCALES__,i="Canceled because of new search request.",L=()=>{const e=new Worker(__VUEPRESS_DEV__?new URL("./worker/index.js",import.meta.url):`${__VUEPRESS_BASE__}${m.worker}`,__VUEPRESS_DEV__?{type:"module"}:{}),r={suggest:null,search:null,all:null};return e.addEventListener("message",({data:o})=>{const[s,n,c]=o,t=r[s];t?.id===n&&t.resolve(c)}),e.addEventListener("error",o=>{console.warn("Search Worker error:",o)}),{suggest:(o,s,n)=>new Promise((c,t)=>{r.suggest?.reject(new Error(i));const a=Date.now();e.postMessage({type:"suggest",id:a,query:o,locale:s,options:n}),r.suggest={id:a,resolve:c,reject:t}}),search:(o,s,n)=>new Promise((c,t)=>{r.search?.reject(new Error(i));const a=Date.now();e.postMessage({type:"search",id:a,query:o,locale:s,options:n}),r.search={id:a,resolve:c,reject:t}}),all:(o,s,n)=>new Promise((c,t)=>{r.all?.reject(new Error(i));const a=Date.now();e.postMessage({type:"all",id:a,query:o,locale:s,options:n}),r.all={id:a,resolve:c,reject:t}}),terminate:()=>{e.terminate(),E(r).forEach(o=>{o?.reject(new Error("Worker has been terminated."))})}}},l=g({}),S=Symbol(__VUEPRESS_DEV__?"slimsearch":""),R=e=>{w(e)?_(()=>e.value,r=>{l.value=r}):v(e)?_(u(e),r=>{l.value=r}):l.value=e},y=()=>{const e=h(),r=d(S);return u(()=>{const{locales:o={},...s}=r.value;return{...s,...o[e.value]}})},C=e=>{e.provide(S,p(l))};export{f as a,L as c,R as d,C as i,j as l,m as o,y as u};
//# sourceMappingURL=index-CoHE-pvH.js.map
