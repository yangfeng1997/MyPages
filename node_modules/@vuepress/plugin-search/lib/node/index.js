import{getFullLocaleConfig as s}from"@vuepress/helper";import{watch as n}from"chokidar";import{path as d,getDirname as _}from"vuepress/utils";const m=`
if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updateSearchIndex) {
    __VUE_HMR_RUNTIME__.updateSearchIndex(searchIndex)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ searchIndex }) => {
    __VUE_HMR_RUNTIME__.updateSearchIndex(searchIndex)
  })
}
`,t=async({app:l,isSearchable:p,getExtraFields:o})=>{const r=l.pages.filter(p).map(e=>({title:e.title,headers:e.headers,path:e.path,pathLocale:e.pathLocale,extraFields:o(e)}));let a=`export const SEARCH_INDEX = ${JSON.stringify(r,null,2)}
`;return l.env.isDev&&(a+=m),l.writeTemp("internal/searchIndex.js",a)},u=[[["en","en-US"],{placeholder:"Search"}],[["zh","zh-CN","zh-Hans","zh-TW","zh-Hant"],{placeholder:"搜索"}],[["de","de-DE"],{placeholder:"Suche"}],[["de-AT"],{placeholder:"Suche"}],[["vi","vi-VN"],{placeholder:"Tìm kiếm"}],[["uk"],{placeholder:"Пошук"}],[["ru","ru-RU"],{placeholder:"Поиск"}],[["br"],{placeholder:"Pesquisar"}],[["pl","pl-PL"],{placeholder:"Szukaj"}],[["sk","sk-SK"],{placeholder:"Hľadať"}],[["fr","fr-FR"],{placeholder:"Rechercher"}],[["es","es-ES"],{placeholder:"Buscar"}],[["ja","ja-JP"],{placeholder:"検索"}],[["tr","tr-TR"],{placeholder:"Ara"}],[["ko","ko-KO"],{placeholder:"검색"}],[["fi","fi-FI"],{placeholder:"Etsi"}],[["hu","hu-HU"],{placeholder:"Keresés"}],[["id","id-ID"],{placeholder:"Cari sesuatu"}],[["nl","nl-NL"],{placeholder:"Zoeken"}]],S=import.meta.dirname||_(import.meta.url),h="@vuepress/plugin-search",E=({locales:l={},hotKeys:p=["s","/"],maxSuggestions:o=5,isSearchable:r=()=>!0,getExtraFields:a=()=>[]}={})=>({name:h,clientConfigFile:d.resolve(S,"../client/config.js"),define:e=>({__SEARCH_HOT_KEYS__:p,__SEARCH_LOCALES__:s({app:e,name:h,default:u,config:l}),__SEARCH_MAX_SUGGESTIONS__:o}),onPrepared:async e=>{await t({app:e,isSearchable:r,getExtraFields:a})},onWatched:(e,i)=>{const c=n("pages/**/*.js",{cwd:e.dir.temp(),ignoreInitial:!0});c.on("add",()=>{t({app:e,isSearchable:r,getExtraFields:a})}),c.on("change",()=>{t({app:e,isSearchable:r,getExtraFields:a})}),c.on("unlink",()=>{t({app:e,isSearchable:r,getExtraFields:a})}),i.push(c)}});export{t as prepareSearchIndex,E as searchPlugin};
//# sourceMappingURL=index.js.map
