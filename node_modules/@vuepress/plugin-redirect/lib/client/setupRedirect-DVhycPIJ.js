import{redirectMap as $}from"@temp/redirect/map.js";import{entries as x,isLinkHttp as C}from"@vuepress/helper/client";import{usePreferredLanguages as D,watchImmediate as E}from"@vueuse/core";import{computed as I,onMounted as j}from"vue";import{useRoute as y,useRouter as R,useRouteLocale as L,useRoutePath as g}from"vuepress/client";import{u as z,s as P}from"./useRedirectInfo-BzhIENgm.js";const A=/#.*$/u,B=(a,o=!1)=>(o?a.replace(A,""):a).replace(/\/(?:README\.md)?$/i,"/index.html").replace(/(?:\.(?:md|html))?$/,".html"),F=({autoLocale:a,config:o,defaultBehavior:l,defaultLocale:c,localeFallback:m})=>{const w=Object.entries(o),b=D(),d=y(),s=R(),k=L(),h=g(),M=I(()=>k.value==="/"),S=()=>{const e=h.value,r=s.getRoutes(),u=c&&r.some(({path:t})=>t===e.replace("/",c))?c:r.find(({path:t})=>e.split("/").length>=3&&t===e.replace(/^\/[^/]+\//,"/"))?.path;let p=null;e:for(const t of b.value)for(const[f,v]of w)if(v.includes(t)){if(m&&r.every(({path:i})=>i!==e.replace("/",i)))continue;p=f;break e}const n=u?d.fullPath.replace("/",u):null;if(p){const t=r.some(({path:i})=>e.replace("/",p)===i),f=d.fullPath.replace("/",p),v=t?f:l==="homepage"?p:l==="defaultLocale"&&n?n:f;s.replace(v)}else n?s.replace(n):h.value!=="/404.html"&&s.replace("/404.html")};E(h,e=>{for(const[r,u]of x($))if(B(e.toLowerCase())===r.toLowerCase()){C(u)?window.open(u):s.replace(u);return}a&&M.value&&S()})},H=a=>{const o=z(a),l=L(),c=g(),m=R();j(()=>{o.value&&!P.value[l.value]&&(m.replace(c.value.replace(l.value,o.value.localePath)),P.value[l.value]=!0)})};export{H as a,F as s};
//# sourceMappingURL=setupRedirect-DVhycPIJ.js.map
