"use strict";var OnigurumaParser=(()=>{var te=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var rr=Object.getOwnPropertyNames;var tr=Object.prototype.hasOwnProperty;var nr=(e,r)=>{for(var t in r)te(e,t,{get:r[t],enumerable:!0})},ar=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of rr(r))!tr.call(e,i)&&i!==t&&te(e,i,{get:()=>r[i],enumerable:!(a=er(r,i))||a.enumerable});return e};var or=e=>ar(te({},"__esModule",{value:!0}),e);var _t={};nr(_t,{OnigUnicodePropertyMap:()=>P,generate:()=>H,getOptionalOptimizations:()=>se,optimize:()=>Ye,parse:()=>E,toOnigurumaAst:()=>Te,traverse:()=>q});function y(e){if([...e].length!==1)throw new Error(`Expected "${e}" to be a single code point`);return e.codePointAt(0)}function ue(e,r,t){return e.has(r)||e.set(r,t),e.get(r)}var F=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),u=String.raw;function b(e,r){if(e==null)throw new Error(r??"Value expected");return e}function H(e){let r=[],t=e,a={inCharClass:!1,lastNode:t,parent:e},i=o=>{a.lastNode=t,t=o,ur(a.lastNode)===o&&(a.parent=a.lastNode,r.push(a.parent));let s=b(ir[o.type],`Unexpected node type "${o.type}"`)(o,a,i);return pr(a.parent)===o&&(r.pop(),a.parent=r.at(-1)??e),s};return{pattern:e.body.map(i).join("|"),flags:i(e.flags)}}var ir={AbsenceFunction({body:e,kind:r},t,a){if(r!=="repeater")throw new Error(`Unexpected absence function kind "${r}"`);return`(?~${e.map(a).join("|")})`},Alternative({body:e},r,t){return e.map(t).join("")},Assertion({kind:e,negate:r}){return e==="grapheme_boundary"?r?u`\Y`:u`\y`:e==="word_boundary"?r?u`\B`:u`\b`:b({line_end:"$",line_start:"^",search_start:u`\G`,string_end:u`\z`,string_end_newline:u`\Z`,string_start:u`\A`}[e],`Unexpected assertion kind "${e}"`)},Backreference({ref:e}){return typeof e=="number"?"\\"+e:`\\k<${e}>`},CapturingGroup({body:e,name:r},t,a){return`(${r?`?${r.includes(">")?`'${r}'`:`<${r}>`}`:""}${e.map(a).join("|")})`},Character(e,{inCharClass:r,lastNode:t,parent:a}){let{value:i}=e;if(pe.has(i))return pe.get(i);let o=t.type==="Backreference";if(i<32||i>126&&i<160||i>262143||o&&dr(i))return i>127?`\\x{${i.toString(16).toUpperCase()}}`:`\\x${i.toString(16).toUpperCase().padStart(2,"0")}`;let n=String.fromCodePoint(i),s=!1;if(r){let l=a.type==="CharacterClass",p=l&&a.body[0]===e,d=l&&a.body.at(-1)===e;n==="^"?s=p&&!a.negate:n==="]"?s=!p:n==="-"?s=!p&&!d:s=lr.has(n)}else s=sr.has(n);return`${s?"\\":""}${n}`},CharacterClass({body:e,kind:r,negate:t},a,i){function o(){return a.parent.type==="CharacterClass"&&a.parent.kind==="intersection"&&r==="union"&&!e.length?"":`[${t?"^":""}${e.map(i).join(r==="intersection"?"&&":"")}]`}if(!a.inCharClass){a.inCharClass=!0;let n=o();return a.inCharClass=!1,n}return o()},CharacterClassRange({min:e,max:r},t,a){return`${a(e)}-${a(r)}`},CharacterSet({kind:e,negate:r,value:t},{inCharClass:a}){switch(e){case"any":return u`\O`;case"digit":return r?u`\D`:u`\d`;case"dot":return".";case"grapheme":return u`\X`;case"hex":return r?u`\H`:u`\h`;case"newline":return r?u`\N`:u`\R`;case"posix":return a?`[:${r?"^":""}${t}:]`:`${r?u`\P`:u`\p`}{${t}}`;case"property":return`${r?u`\P`:u`\p`}{${t}}`;case"space":return r?u`\S`:u`\s`;case"word":return r?u`\W`:u`\w`;default:throw new Error(`Unexpected character set kind "${e}"`)}},Directive({kind:e,flags:r}){if(e==="flags"){let{enable:t={},disable:a={}}=r,i=U(t),o=U(a);return i||o?`(?${i}${o?`-${o}`:""})`:""}if(e==="keep")return u`\K`;throw new Error(`Unexpected directive kind "${e}"`)},Flags(e){return U(e)},Group({atomic:e,body:r,flags:t},a,i){let o=r.map(i).join("|");return`(?${cr(e,t)}${o})`},LookaroundAssertion({body:e,kind:r,negate:t},a,i){return`(?${`${r==="lookahead"?"":"<"}${t?"!":"="}`}${e.map(i).join("|")})`},NamedCallout({kind:e,tag:r,arguments:t}){if(e==="custom")throw new Error(`Unexpected named callout kind "${e}"`);return`(*${e.toUpperCase()}${r?`[${r}]`:""}${t?`{${t.join(",")}}`:""})`},Quantifier(e,{parent:r},t){let{body:a,kind:i,max:o,min:n}=e;if(n===1/0)throw new Error("Invalid quantifier: infinite min");if(n>o)throw new Error(`Invalid quantifier: min "${n}" > max "${o}"`);let s=a.type==="Quantifier"&&a.kind==="greedy",l=r.type==="Quantifier"&&r.kind==="possessive"&&r.min===1&&r.max===1/0,p=i==="greedy"&&l,d;ce(e)&&!p&&(!n&&o===1&&!s?d="?":!n&&o===1/0?d="*":n===1&&o===1/0&&(!(s&&ce(a))||i==="possessive")&&(d="+"));let f=!d;if(f)if(i==="possessive"){if(n===o)throw new Error(`Invalid possessive quantifier: min and max are equal "${n}"`);if(o===1/0)throw new Error(`Invalid possessive quantifier: min "${n}" with infinite max"`);d=`{${o},${n}}`}else n===o?d=`{${n}}`:d=`{${n},${o===1/0?"":o}}`;let c={greedy:"",lazy:"?",possessive:f?"":"+"}[i];return`${t(a)}${d}${c}`},Subroutine({ref:e}){return typeof e=="string"&&e.includes(">")?u`\g'${e}'`:u`\g<${e}>`}},sr=new Set(["$","(",")","*","+",".","?","[","\\","^","{","|"]),lr=new Set(["&","-","[","\\","]","^"]),pe=new Map([[7,u`\a`],[9,u`\t`],[10,u`\n`],[11,u`\v`],[12,u`\f`],[13,u`\r`],[27,u`\e`],[8232,u`\u2028`],[8233,u`\u2029`],[65279,u`\uFEFF`]]);function ur(e){return"body"in e?Array.isArray(e.body)?e.body[0]??null:e.body:"min"in e&&e.min.type?e.min:null}function pr(e){return"body"in e?Array.isArray(e.body)?e.body.at(-1)??null:e.body:"max"in e&&e.max.type?e.max:null}function U({ignoreCase:e,dotAll:r,extended:t,digitIsAscii:a,posixIsAscii:i,spaceIsAscii:o,wordIsAscii:n}){return`${e?"i":""}${r?"m":""}${t?"x":""}${a?"D":""}${i?"P":""}${o?"S":""}${n?"W":""}`}function cr(e,r){if(e)return">";let t="";if(r){let{enable:a={},disable:i={}}=r,o=U(a),n=U(i);t=`${o}${n?`-${n}`:""}`}return`${t}:`}function dr(e){return e>47&&e<58}function ce({min:e,max:r}){return!e&&r===1||!e&&r===1/0||e===1&&r===1/0}var me=u`\[\^?`,ge=`c.? | C(?:-.?)?|${u`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${u`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${u`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${u`o\{[^\}]*\}?`}|${u`\d{1,3}`}`,ae=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,z=new RegExp(u`
  \\ (?:
    ${ge}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${ae.source})+
  | ${me}
  | .
`.replace(/\s+/g,""),"gsu"),ne=new RegExp(u`
  \\ (?:
    ${ge}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${me}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function Ce(e,r={}){let t={flags:"",...r,rules:{captureGroup:!1,singleline:!1,...r.rules}};if(typeof e!="string")throw new Error("String expected as pattern");let a=Pr(t.flags),i=[a.extended],o={captureGroup:t.rules.captureGroup,getCurrentModX(){return i.at(-1)},numOpenGroups:0,popModX(){i.pop()},pushModX(c){i.push(c)},replaceCurrentModX(c){i[i.length-1]=c},singleline:t.rules.singleline},n=[],s;for(z.lastIndex=0;s=z.exec(e);){let c=hr(o,e,s[0],z.lastIndex);c.tokens?n.push(...c.tokens):c.token&&n.push(c.token),c.lastIndex!==void 0&&(z.lastIndex=c.lastIndex)}let l=[],p=0;n.filter(c=>c.type==="GroupOpen").forEach(c=>{c.kind==="capturing"?c.number=++p:c.raw==="("&&l.push(c)}),p||l.forEach((c,_)=>{c.kind="capturing",c.number=_+1});let d=p||l.length;return{tokens:n.map(c=>c.type==="EscapedNumber"?Mr(c,d):c).flat(),flags:a}}function hr(e,r,t,a){let[i,o]=t;if(t==="["||t==="[^"){let n=_r(r,t,a);return{tokens:n.tokens,lastIndex:n.lastIndex}}if(i==="\\"){if("AbBGyYzZ".includes(o))return{token:de(t,t)};if(/^\\g[<']/.test(t)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(t))throw new Error(`Invalid group name "${t}"`);return{token:Sr(t)}}if(/^\\k[<']/.test(t)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(t))throw new Error(`Invalid group name "${t}"`);return{token:Ne(t)}}if(o==="K")return{token:Ie("keep",t)};if(o==="N"||o==="R")return{token:v("newline",t,{negate:o==="N"})};if(o==="O")return{token:v("any",t)};if(o==="X")return{token:v("grapheme",t)};let n=be(t,{inCharClass:!1});return Array.isArray(n)?{tokens:n}:{token:n}}if(i==="("){if(o==="*")return{token:wr(t)};if(t==="(?{")throw new Error(`Unsupported callout "${t}"`);if(t.startsWith("(?#")){if(r[a]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:a+1}}if(/^\(\?[-imx]+[:)]$/.test(t))return{token:vr(t,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,t==="("&&!e.captureGroup||t==="(?:")return{token:w("group",t)};if(t==="(?>")return{token:w("atomic",t)};if(t==="(?="||t==="(?!"||t==="(?<="||t==="(?<!")return{token:w(t[2]==="<"?"lookbehind":"lookahead",t,{negate:t.endsWith("!")})};if(t==="("&&e.captureGroup||t.startsWith("(?<")&&t.endsWith(">")||t.startsWith("(?'")&&t.endsWith("'"))return{token:w("capturing",t,{...t!=="("&&{name:t.slice(3,-1)}})};if(t.startsWith("(?~")){if(t==="(?~|")throw new Error(`Unsupported absence function kind "${t}"`);return{token:w("absence_repeater",t)}}throw t==="(?("?new Error(`Unsupported conditional "${t}"`):new Error(`Invalid or unsupported group option "${t}"`)}if(t===")"){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:Nr(t)}}if(e.getCurrentModX()){if(t==="#"){let n=r.indexOf(`
`,a);return{lastIndex:n===-1?r.length:n}}if(/^\s$/.test(t)){let n=/\s+/y;return n.lastIndex=a,{lastIndex:n.exec(r)?n.lastIndex:a}}}if(t===".")return{token:v("dot",t)};if(t==="^"||t==="$"){let n=e.singleline?{"^":u`\A`,$:u`\Z`}[t]:t;return{token:de(n,t)}}return t==="|"?{token:yr(t)}:ae.test(t)?{tokens:Gr(t)}:{token:S(y(t),t)}}function _r(e,r,t){let a=[he(r[1]==="^",r)],i=1,o;for(ne.lastIndex=t;o=ne.exec(e);){let n=o[0];if(n[0]==="["&&n[1]!==":")i++,a.push(he(n[1]==="^",n));else if(n==="]"){if(a.at(-1).type==="CharacterClassOpen")a.push(S(93,n));else if(i--,a.push(mr(n)),!i)break}else{let s=fr(n);Array.isArray(s)?a.push(...s):a.push(s)}}return{tokens:a,lastIndex:ne.lastIndex||e.length}}function fr(e){if(e[0]==="\\")return be(e,{inCharClass:!0});if(e[0]==="["){let r=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!r||!F.has(r.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return v("posix",e,{value:r.groups.name,negate:!!r.groups.negate})}return e==="-"?gr(e):e==="&&"?Cr(e):S(y(e),e)}function be(e,{inCharClass:r}){let t=e[1];if(t==="c"||t==="C")return xr(e);if("dDhHsSwW".includes(t))return Tr(e);if(e.startsWith(u`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(e.length===3)throw new Error(`Incomplete or invalid Unicode property "${e}"`);return Er(e)}if(/^\\x[89A-Fa-f]\p{AHex}/u.test(e))try{let a=e.split(/\\x/).slice(1).map(s=>parseInt(s,16)),i=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(a)),o=new TextEncoder;return[...i].map(s=>{let l=[...o.encode(s)].map(p=>`\\x${p.toString(16)}`).join("");return S(y(s),l)})}catch{throw new Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if(t==="u"||t==="x")return S(Or(e),e);if(_e.has(t))return S(_e.get(t),e);if(/\d/.test(t))return br(r,e);if(e==="\\")throw new Error(u`Incomplete escape "\"`);if(t==="M")throw new Error(`Unsupported meta "${e}"`);if([...e].length===2)return S(e.codePointAt(1),e);throw new Error(`Unexpected escape "${e}"`)}function yr(e){return{type:"Alternator",raw:e}}function de(e,r){return{type:"Assertion",kind:e,raw:r}}function Ne(e){return{type:"Backreference",raw:e}}function S(e,r){return{type:"Character",value:e,raw:r}}function mr(e){return{type:"CharacterClassClose",raw:e}}function gr(e){return{type:"CharacterClassHyphen",raw:e}}function Cr(e){return{type:"CharacterClassIntersector",raw:e}}function he(e,r){return{type:"CharacterClassOpen",negate:e,raw:r}}function v(e,r,t={}){return{type:"CharacterSet",kind:e,...t,raw:r}}function Ie(e,r,t={}){return e==="keep"?{type:"Directive",kind:e,raw:r}:{type:"Directive",kind:e,flags:b(t.flags),raw:r}}function br(e,r){return{type:"EscapedNumber",inCharClass:e,raw:r}}function Nr(e){return{type:"GroupClose",raw:e}}function w(e,r,t={}){return{type:"GroupOpen",kind:e,...t,raw:r}}function Ir(e,r,t,a){return{type:"NamedCallout",kind:e,tag:r,arguments:t,raw:a}}function kr(e,r,t,a){return{type:"Quantifier",kind:e,min:r,max:t,raw:a}}function Sr(e){return{type:"Subroutine",raw:e}}var Ar=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),_e=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function xr(e){let r=e[1]==="c"?e[2]:e[3];if(!r||!/[A-Za-z]/.test(r))throw new Error(`Unsupported control character "${e}"`);return S(y(r.toUpperCase())-64,e)}function vr(e,r){let{on:t,off:a}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;a??="";let i=(r.getCurrentModX()||t.includes("x"))&&!a.includes("x"),o=ye(t),n=ye(a),s={};if(o&&(s.enable=o),n&&(s.disable=n),e.endsWith(")"))return r.replaceCurrentModX(i),Ie("flags",e,{flags:s});if(e.endsWith(":"))return r.pushModX(i),r.numOpenGroups++,w("group",e,{...(o||n)&&{flags:s}});throw new Error(`Unexpected flag modifier "${e}"`)}function wr(e){let r=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(e);if(!r)throw new Error(`Incomplete or invalid named callout "${e}"`);let{name:t,tag:a,args:i}=r.groups;if(!t)throw new Error(`Invalid named callout "${e}"`);if(a==="")throw new Error(`Named callout tag with empty value not allowed "${e}"`);let o=i?i.split(",").filter(d=>d!=="").map(d=>/^[+-]?\d+$/.test(d)?+d:d):[],[n,s,l]=o,p=Ar.has(t)?t.toLowerCase():"custom";switch(p){case"fail":case"mismatch":case"skip":if(o.length>0)throw new Error(`Named callout arguments not allowed "${o}"`);break;case"error":if(o.length>1)throw new Error(`Named callout allows only one argument "${o}"`);if(typeof n=="string")throw new Error(`Named callout argument must be a number "${n}"`);break;case"max":if(!o.length||o.length>2)throw new Error(`Named callout must have one or two arguments "${o}"`);if(typeof n=="string"&&!/^[A-Za-z_]\w*$/.test(n))throw new Error(`Named callout argument one must be a tag or number "${n}"`);if(o.length===2&&(typeof s=="number"||!/^[<>X]$/.test(s)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${s}"`);break;case"count":case"total_count":if(o.length>1)throw new Error(`Named callout allows only one argument "${o}"`);if(o.length===1&&(typeof n=="number"||!/^[<>X]$/.test(n)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${n}"`);break;case"cmp":if(o.length!==3)throw new Error(`Named callout must have three arguments "${o}"`);if(typeof n=="string"&&!/^[A-Za-z_]\w*$/.test(n))throw new Error(`Named callout argument one must be a tag or number "${n}"`);if(typeof s=="number"||!/^(?:[<>!=]=|[<>])$/.test(s))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${s}"`);if(typeof l=="string"&&!/^[A-Za-z_]\w*$/.test(l))throw new Error(`Named callout argument three must be a tag or number "${l}"`);break;case"custom":throw new Error(`Undefined callout name "${t}"`);default:throw new Error(`Unexpected named callout kind "${p}"`)}return Ir(p,a??null,i?.split(",")??null,e)}function fe(e){let r=null,t,a;if(e[0]==="{"){let{minStr:i,maxStr:o}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(e).groups,n=1e5;if(+i>n||o&&+o>n)throw new Error("Quantifier value unsupported in Oniguruma");if(t=+i,a=o===void 0?+i:o===""?1/0:+o,t>a&&(r="possessive",[t,a]=[a,t]),e.endsWith("?")){if(r==="possessive")throw new Error('Unsupported possessive interval quantifier chain with "?"');r="lazy"}else r||(r="greedy")}else t=e[0]==="+"?1:0,a=e[0]==="?"?1:1/0,r=e[1]==="+"?"possessive":e[1]==="?"?"lazy":"greedy";return kr(r,t,a,e)}function Tr(e){let r=e[1].toLowerCase();return v({d:"digit",h:"hex",s:"space",w:"word"}[r],e,{negate:e[1]!==r})}function Er(e){let{p:r,neg:t,value:a}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups;return v("property",e,{value:a,negate:r==="P"&&!t||r==="p"&&!!t})}function ye(e){let r={};return e.includes("i")&&(r.ignoreCase=!0),e.includes("m")&&(r.dotAll=!0),e.includes("x")&&(r.extended=!0),Object.keys(r).length?r:null}function Pr(e){if(!/^[imxDPSW]*$/.test(e))throw new Error(`Flags "${e}" includes unsupported value`);let r={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1};for(let t of e)r[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[t]]=!0;return r}function Or(e){if(/^(?:\\u(?!\p{AHex}{4})|\\x(?!\p{AHex}{1,2}|\{\p{AHex}{1,8}\}))/u.test(e))throw new Error(`Incomplete or invalid escape "${e}"`);let r=e[2]==="{"?/^\\x\{\s*(?<hex>\p{AHex}+)/u.exec(e).groups.hex:e.slice(2);return parseInt(r,16)}function Mr(e,r){let{raw:t,inCharClass:a}=e,i=t.slice(1);if(!a&&(i!=="0"&&i.length===1||i[0]!=="0"&&+i<=r))return[Ne(t)];let o=[],n=i.match(/^[0-7]+|\d/g);for(let s=0;s<n.length;s++){let l=n[s],p;if(s===0&&l!=="8"&&l!=="9"){if(p=parseInt(l,8),p>127)throw new Error(u`Octal encoded byte above 177 unsupported "${t}"`)}else p=y(l);o.push(S(p,(s===0?"\\":"")+l))}return o}function Gr(e){let r=[],t=new RegExp(ae,"gy"),a;for(;a=t.exec(e);){let i=a[0];if(i[0]==="{"){let o=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(i);if(o){let{min:n,max:s}=o.groups;if(+n>+s&&i.endsWith("?")){t.lastIndex--,r.push(fe(i.slice(0,-1)));continue}}}r.push(fe(i))}return r}function T(e,r){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(e.body.length!==1)return!1;let t=e.body[0];return!r||Object.keys(r).every(a=>r[a]===t[a])}function I(e){return!(!Lr.has(e.type)||e.type==="AbsenceFunction"&&e.kind!=="repeater")}var Lr=new Set(["AbsenceFunction","CapturingGroup","Group","LookaroundAssertion","Regex"]);function Q(e){return Fr.has(e.type)}var Fr=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function E(e,r={}){let t={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...r,rules:{captureGroup:!1,singleline:!1,...r.rules}},a=Ce(e,{flags:t.flags,rules:{captureGroup:t.rules.captureGroup,singleline:t.rules.singleline}}),i=(c,_)=>{let h=a.tokens[o.nextIndex];switch(o.parent=c,o.nextIndex++,h.type){case"Alternator":return C();case"Assertion":return Ur(h);case"Backreference":return $r(h,o);case"Character":return D(h.value,{useLastValid:!!_.isCheckingRangeEnd});case"CharacterClassHyphen":return Dr(h,o,_);case"CharacterClassOpen":return Kr(h,o,_);case"CharacterSet":return Rr(h,o);case"Directive":return Wr(h.kind,{flags:h.flags});case"GroupOpen":return Br(h,o,_);case"NamedCallout":return Jr(h.kind,h.tag,h.arguments);case"Quantifier":return Vr(h,o);case"Subroutine":return jr(h,o);default:throw new Error(`Unexpected token type "${h.type}"`)}},o={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:t.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:t.skipBackrefValidation,skipLookbehindValidation:t.skipLookbehindValidation,skipPropertyNameValidation:t.skipPropertyNameValidation,subroutines:[],tokens:a.tokens,unicodePropertyMap:t.unicodePropertyMap,walk:i},n=Yr(Xr(a.flags)),s=n.body[0];for(;o.nextIndex<a.tokens.length;){let c=i(s,{});c.type==="Alternative"?(n.body.push(c),s=c):s.body.push(c)}let{capturingGroups:l,hasNumberedRef:p,namedGroupsByName:d,subroutines:f}=o;if(p&&d.size&&!t.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(let{ref:c}of f)if(typeof c=="number"){if(c>l.length)throw new Error("Subroutine uses a group number that's not defined");c&&(l[c-1].isSubroutined=!0)}else if(d.has(c)){if(d.get(c).length>1)throw new Error(u`Subroutine uses a duplicate group name "\g<${c}>"`);d.get(c)[0].isSubroutined=!0}else throw new Error(u`Subroutine uses a group name that's not defined "\g<${c}>"`);return n}function Ur({kind:e}){return zr(b({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"grapheme_boundary","\\Y":"grapheme_boundary","\\z":"string_end","\\Z":"string_end_newline"}[e],`Unexpected assertion kind "${e}"`),{negate:e===u`\B`||e===u`\Y`})}function $r({raw:e},r){let t=/^\\k[<']/.test(e),a=t?e.slice(3,-1):e.slice(1),i=(o,n=!1)=>{let s=r.capturingGroups.length,l=!1;if(o>s)if(r.skipBackrefValidation)l=!0;else throw new Error(`Not enough capturing groups defined to the left "${e}"`);return r.hasNumberedRef=!0,ke(n?s+1-o:o,{orphan:l})};if(t){let o=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(a);if(o)return i(+o.groups.num,!!o.groups.sign);if(/[-+]/.test(a))throw new Error(`Invalid backref name "${e}"`);if(!r.namedGroupsByName.has(a))throw new Error(`Group name not defined to the left "${e}"`);return ke(a)}return i(+a)}function Dr(e,r,t){let{tokens:a,walk:i}=r,o=r.parent,n=o.body.at(-1),s=a[r.nextIndex];if(!t.isCheckingRangeEnd&&n&&n.type!=="CharacterClass"&&n.type!=="CharacterClassRange"&&s&&s.type!=="CharacterClassOpen"&&s.type!=="CharacterClassClose"&&s.type!=="CharacterClassIntersector"){let l=i(o,{...t,isCheckingRangeEnd:!0});if(n.type==="Character"&&l.type==="Character")return o.body.pop(),W(n,l);throw new Error("Invalid character class range")}return D(y("-"))}function Kr({negate:e},r,t){let{tokens:a,walk:i}=r,o=a[r.nextIndex],n=[$()],s=xe(o);for(;s.type!=="CharacterClassClose";){if(s.type==="CharacterClassIntersector")n.push($()),r.nextIndex++;else{let p=n.at(-1);p.body.push(i(p,t))}s=xe(a[r.nextIndex],o)}let l=$({negate:e});return n.length===1?l.body=n[0].body:(l.kind="intersection",l.body=n.map(p=>p.body.length===1?p.body[0]:p)),r.nextIndex++,l}function Rr({kind:e,negate:r,value:t},a){let{normalizeUnknownPropertyNames:i,skipPropertyNameValidation:o,unicodePropertyMap:n}=a;if(e==="property"){let s=J(t);if(F.has(s)&&!n?.has(s))e="posix",t=s;else return X(t,{negate:r,normalizeUnknownPropertyNames:i,skipPropertyNameValidation:o,unicodePropertyMap:n})}return e==="posix"?Zr(t,{negate:r}):k(e,{negate:r})}function Br(e,r,t){let{tokens:a,capturingGroups:i,namedGroupsByName:o,skipLookbehindValidation:n,walk:s}=r,l=rt(e),p=l.type==="AbsenceFunction",d=Ae(l),f=d&&l.negate;if(l.type==="CapturingGroup"&&(i.push(l),l.name&&ue(o,l.name,[]).push(l)),p&&t.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let c=ve(a[r.nextIndex]);for(;c.type!=="GroupClose";){if(c.type==="Alternator")l.body.push(C()),r.nextIndex++;else{let _=l.body.at(-1),h=s(_,{...t,isInAbsenceFunction:t.isInAbsenceFunction||p,isInLookbehind:t.isInLookbehind||d,isInNegLookbehind:t.isInNegLookbehind||f});if(_.body.push(h),(d||t.isInLookbehind)&&!n){let g="Lookbehind includes a pattern not allowed by Oniguruma";if(f||t.isInNegLookbehind){if(Se(h)||h.type==="CapturingGroup")throw new Error(g)}else if(Se(h)||Ae(h)&&h.negate)throw new Error(g)}}c=ve(a[r.nextIndex])}return r.nextIndex++,l}function Vr({kind:e,min:r,max:t},a){let i=a.parent,o=i.body.at(-1);if(!o||!Q(o))throw new Error("Quantifier requires a repeatable token");let n=qr(e,r,t,o);return i.body.pop(),n}function jr({raw:e},r){let{capturingGroups:t,subroutines:a}=r,i=e.slice(3,-1),o=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(i);if(o){let s=+o.groups.num,l=t.length;if(r.hasNumberedRef=!0,i={"":s,"+":l+s,"-":l+1-s}[o.groups.sign],i<1)throw new Error("Invalid subroutine number")}else i==="0"&&(i=0);let n=et(i);return a.push(n),n}function Hr(e,r){if(e!=="repeater")throw new Error(`Unexpected absence function kind "${e}"`);return{type:"AbsenceFunction",kind:e,body:K(r?.body)}}function C(e){return{type:"Alternative",body:we(e?.body)}}function zr(e,r){let t={type:"Assertion",kind:e};return(e==="word_boundary"||e==="grapheme_boundary")&&(t.negate=!!r?.negate),t}function ke(e,r){let t=!!r?.orphan;return{type:"Backreference",ref:e,...t&&{orphan:t}}}function Qr(e,r){let t={name:void 0,isSubroutined:!1,...r};if(t.name!==void 0&&!tt(t.name))throw new Error(`Group name "${t.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:e,...t.name&&{name:t.name},...t.isSubroutined&&{isSubroutined:t.isSubroutined},body:K(r?.body)}}function D(e,r){let t={useLastValid:!1,...r};if(e>1114111){let a=e.toString(16);if(t.useLastValid)e=1114111;else throw e>1310719?new Error(`Invalid code point out of range "\\x{${a}}"`):new Error(`Invalid code point out of range in JS "\\x{${a}}"`)}return{type:"Character",value:e}}function $(e){let r={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:r.kind,negate:r.negate,body:we(e?.body)}}function W(e,r){if(r.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:r}}function k(e,r){let t=!!r?.negate,a={type:"CharacterSet",kind:e};return(e==="digit"||e==="hex"||e==="newline"||e==="space"||e==="word")&&(a.negate=t),(e==="grapheme"||e==="newline"&&!t)&&(a.variableLength=!0),a}function Wr(e,r={}){if(e==="keep")return{type:"Directive",kind:e};if(e==="flags")return{type:"Directive",kind:e,flags:b(r.flags)};throw new Error(`Unexpected directive kind "${e}"`)}function Xr(e){return{type:"Flags",...e}}function A(e){let r=e?.atomic,t=e?.flags;if(r&&t)throw new Error("Atomic group cannot have flags");return{type:"Group",...r&&{atomic:r},...t&&{flags:t},body:K(e?.body)}}function oe(e){let r={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:r.behind?"lookbehind":"lookahead",negate:r.negate,body:K(e?.body)}}function Jr(e,r,t){return{type:"NamedCallout",kind:e,tag:r,arguments:t}}function Zr(e,r){let t=!!r?.negate;if(!F.has(e))throw new Error(`Invalid POSIX class "${e}"`);return{type:"CharacterSet",kind:"posix",value:e,negate:t}}function qr(e,r,t,a){if(r>t)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:r,max:t,body:a}}function Yr(e,r){return{type:"Regex",body:K(r?.body),flags:e}}function et(e){return{type:"Subroutine",ref:e}}function X(e,r){let t={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...r},a=t.unicodePropertyMap?.get(J(e));if(!a){if(t.normalizeUnknownPropertyNames)a=nt(e);else if(t.unicodePropertyMap&&!t.skipPropertyNameValidation)throw new Error(u`Invalid Unicode property "\p{${e}}"`)}return{type:"CharacterSet",kind:"property",value:a??e,negate:t.negate}}function rt({flags:e,kind:r,name:t,negate:a,number:i}){switch(r){case"absence_repeater":return Hr("repeater");case"atomic":return A({atomic:!0});case"capturing":return Qr(i,{name:t});case"group":return A({flags:e});case"lookahead":case"lookbehind":return oe({behind:r==="lookbehind",negate:a});default:throw new Error(`Unexpected group kind "${r}"`)}}function K(e){if(e===void 0)e=[C()];else if(!Array.isArray(e)||!e.length||!e.every(r=>r.type==="Alternative"))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function we(e){if(e===void 0)e=[];else if(!Array.isArray(e)||!e.every(r=>!!r.type))throw new Error("Invalid body; expected array of nodes");return e}function Se(e){return e.type==="LookaroundAssertion"&&e.kind==="lookahead"}function Ae(e){return e.type==="LookaroundAssertion"&&e.kind==="lookbehind"}function tt(e){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(e)}function nt(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}function J(e){return e.replace(/[- _]+/g,"").toLowerCase()}function xe(e,r){return b(e,`${r?.type==="Character"&&r.value===93?"Empty":"Unclosed"} character class`)}function ve(e){return b(e,"Unclosed group")}var P=new Map(`ASCII_Hex_Digit
Adlam
Ahom
Alphabetic
Anatolian_Hieroglyphs
Any
Arabic
Armenian
Assigned
Avestan
Balinese
Bamum
Bassa_Vah
Batak
Bengali
Bhaiksuki
Bidi_Control
Bopomofo
Brahmi
Braille
Buginese
Buhid
C
Canadian_Aboriginal
Carian
Case_Ignorable
Cased
Caucasian_Albanian
Cc
Cf
Chakma
Cham
Changes_When_Casefolded
Changes_When_Casemapped
Changes_When_Lowercased
Changes_When_Titlecased
Changes_When_Uppercased
Cherokee
Chorasmian
Cn
Co
Common
Coptic
Cs
Cuneiform
Cypriot
Cypro_Minoan
Cyrillic
Dash
Default_Ignorable_Code_Point
Deprecated
Deseret
Devanagari
Diacritic
Dives_Akuru
Dogra
Duployan
Egyptian_Hieroglyphs
Elbasan
Elymaic
Emoji
Emoji_Component
Emoji_Modifier
Emoji_Modifier_Base
Emoji_Presentation
Ethiopic
Extended_Pictographic
Extender
Garay
Georgian
Glagolitic
Gothic
Grantha
Grapheme_Base
Grapheme_Extend
Grapheme_Link
Greek
Gujarati
Gunjala_Gondi
Gurmukhi
Gurung_Khema
Han
Hangul
Hanifi_Rohingya
Hanunoo
Hatran
Hebrew
Hex_Digit
Hiragana
Hyphen
IDS_Binary_Operator
IDS_Trinary_Operator
IDS_Unary_Operator
ID_Compat_Math_Continue
ID_Compat_Math_Start
ID_Continue
ID_Start
Ideographic
Imperial_Aramaic
InCB
Inherited
Inscriptional_Pahlavi
Inscriptional_Parthian
Javanese
Join_Control
Kaithi
Kannada
Katakana
Kawi
Kayah_Li
Kharoshthi
Khitan_Small_Script
Khmer
Khojki
Khudawadi
Kirat_Rai
L
LC
Lao
Latin
Lepcha
Limbu
Linear_A
Linear_B
Lisu
Ll
Lm
Lo
Logical_Order_Exception
Lowercase
Lt
Lu
Lycian
Lydian
M
Mahajani
Makasar
Malayalam
Mandaic
Manichaean
Marchen
Masaram_Gondi
Math
Mc
Me
Medefaidrin
Meetei_Mayek
Mende_Kikakui
Meroitic_Cursive
Meroitic_Hieroglyphs
Miao
Mn
Modi
Modifier_Combining_Mark
Mongolian
Mro
Multani
Myanmar
N
Nabataean
Nag_Mundari
Nandinagari
Nd
New_Tai_Lue
Newa
Nko
Nl
No
Noncharacter_Code_Point
Nushu
Nyiakeng_Puachue_Hmong
Ogham
Ol_Chiki
Ol_Onal
Old_Hungarian
Old_Italic
Old_North_Arabian
Old_Permic
Old_Persian
Old_Sogdian
Old_South_Arabian
Old_Turkic
Old_Uyghur
Oriya
Osage
Osmanya
Other_Alphabetic
Other_Default_Ignorable_Code_Point
Other_Grapheme_Extend
Other_ID_Continue
Other_ID_Start
Other_Lowercase
Other_Math
Other_Uppercase
P
Pahawh_Hmong
Palmyrene
Pattern_Syntax
Pattern_White_Space
Pau_Cin_Hau
Pc
Pd
Pe
Pf
Phags_Pa
Phoenician
Pi
Po
Prepended_Concatenation_Mark
Ps
Psalter_Pahlavi
Quotation_Mark
Radical
Regional_Indicator
Rejang
Runic
S
Samaritan
Saurashtra
Sc
Sentence_Terminal
Sharada
Shavian
Siddham
SignWriting
Sinhala
Sk
Sm
So
Soft_Dotted
Sogdian
Sora_Sompeng
Soyombo
Sundanese
Sunuwar
Syloti_Nagri
Syriac
Tagalog
Tagbanwa
Tai_Le
Tai_Tham
Tai_Viet
Takri
Tamil
Tangsa
Tangut
Telugu
Terminal_Punctuation
Thaana
Thai
Tibetan
Tifinagh
Tirhuta
Todhri
Toto
Tulu_Tigalari
Ugaritic
Unified_Ideograph
Unknown
Uppercase
Vai
Variation_Selector
Vithkuqi
Wancho
Warang_Citi
White_Space
XID_Continue
XID_Start
Yezidi
Yi
Z
Zanabazar_Square
Zl
Zp
Zs
Adlm
Aghb
AHex
Arab
Armi
Armn
Avst
Bali
Bamu
Bass
Batk
Beng
Bhks
Bidi_C
Bopo
Brah
Brai
Bugi
Buhd
Cakm
Cans
Cari
Cased_Letter
Cher
Chrs
CI
Close_Punctuation
Combining_Mark
Connector_Punctuation
Control
Copt
Cpmn
Cprt
Currency_Symbol
CWCF
CWCM
CWL
CWT
CWU
Cyrl
Dash_Punctuation
Decimal_Number
Dep
Deva
DI
Dia
Diak
Dogr
Dsrt
Dupl
EBase
EComp
Egyp
Elba
Elym
EMod
Enclosing_Mark
EPres
Ethi
Ext
ExtPict
Final_Punctuation
Format
Gara
Geor
Glag
Gong
Gonm
Goth
Gran
Gr_Base
Grek
Gr_Ext
Gr_Link
Gujr
Gukh
Guru
Hang
Hani
Hano
Hatr
Hebr
Hex
Hira
Hluw
Hmng
Hmnp
Hung
IDC
Ideo
IDS
IDSB
IDST
IDSU
Initial_Punctuation
Ital
Java
Join_C
Kali
Kana
Khar
Khmr
Khoj
Kits
Knda
Krai
Kthi
Lana
Laoo
Latn
Lepc
Letter
Letter_Number
Limb
Lina
Linb
Line_Separator
LOE
Lowercase_Letter
Lyci
Lydi
Mahj
Maka
Mand
Mani
Marc
Mark
Math_Symbol
MCM
Medf
Mend
Merc
Mero
Mlym
Modifier_Letter
Modifier_Symbol
Mong
Mroo
Mtei
Mult
Mymr
Nagm
Nand
Narb
Nbat
NChar
Nkoo
Nonspacing_Mark
Nshu
Number
OAlpha
ODI
Ogam
OGr_Ext
OIDC
OIDS
Olck
OLower
OMath
Onao
Open_Punctuation
Orkh
Orya
Osge
Osma
Other
Other_Letter
Other_Number
Other_Punctuation
Other_Symbol
Ougr
OUpper
Palm
Paragraph_Separator
Pat_Syn
Pat_WS
Pauc
PCM
Perm
Phag
Phli
Phlp
Phnx
Plrd
Private_Use
Prti
punct
Punctuation
Qaac
Qaai
QMark
RI
Rjng
Rohg
Runr
Samr
Sarb
Saur
SD
Separator
Sgnw
Shaw
Shrd
Sidd
Sind
Sinh
Sogd
Sogo
Sora
Soyo
Space_Separator
Spacing_Mark
STerm
Sund
Sunu
Surrogate
Sylo
Symbol
Syrc
Tagb
Takr
Tale
Talu
Taml
Tang
Tavt
Telu
Term
Tfng
Tglg
Thaa
Tibt
Tirh
Titlecase_Letter
Tnsa
Todr
Tutg
Ugar
UIdeo
Unassigned
Uppercase_Letter
Vaii
Vith
VS
Wara
Wcho
WSpace
XIDC
XIDS
Xpeo
Xsux
Yezi
Yiii
Zanb
Zinh
Zyyy
Zzzz
In_Basic_Latin
In_Latin_1_Supplement
In_Latin_Extended_A
In_Latin_Extended_B
In_IPA_Extensions
In_Spacing_Modifier_Letters
In_Combining_Diacritical_Marks
In_Greek_and_Coptic
In_Cyrillic
In_Cyrillic_Supplement
In_Armenian
In_Hebrew
In_Arabic
In_Syriac
In_Arabic_Supplement
In_Thaana
In_NKo
In_Samaritan
In_Mandaic
In_Syriac_Supplement
In_Arabic_Extended_B
In_Arabic_Extended_A
In_Devanagari
In_Bengali
In_Gurmukhi
In_Gujarati
In_Oriya
In_Tamil
In_Telugu
In_Kannada
In_Malayalam
In_Sinhala
In_Thai
In_Lao
In_Tibetan
In_Myanmar
In_Georgian
In_Hangul_Jamo
In_Ethiopic
In_Ethiopic_Supplement
In_Cherokee
In_Unified_Canadian_Aboriginal_Syllabics
In_Ogham
In_Runic
In_Tagalog
In_Hanunoo
In_Buhid
In_Tagbanwa
In_Khmer
In_Mongolian
In_Unified_Canadian_Aboriginal_Syllabics_Extended
In_Limbu
In_Tai_Le
In_New_Tai_Lue
In_Khmer_Symbols
In_Buginese
In_Tai_Tham
In_Combining_Diacritical_Marks_Extended
In_Balinese
In_Sundanese
In_Batak
In_Lepcha
In_Ol_Chiki
In_Cyrillic_Extended_C
In_Georgian_Extended
In_Sundanese_Supplement
In_Vedic_Extensions
In_Phonetic_Extensions
In_Phonetic_Extensions_Supplement
In_Combining_Diacritical_Marks_Supplement
In_Latin_Extended_Additional
In_Greek_Extended
In_General_Punctuation
In_Superscripts_and_Subscripts
In_Currency_Symbols
In_Combining_Diacritical_Marks_for_Symbols
In_Letterlike_Symbols
In_Number_Forms
In_Arrows
In_Mathematical_Operators
In_Miscellaneous_Technical
In_Control_Pictures
In_Optical_Character_Recognition
In_Enclosed_Alphanumerics
In_Box_Drawing
In_Block_Elements
In_Geometric_Shapes
In_Miscellaneous_Symbols
In_Dingbats
In_Miscellaneous_Mathematical_Symbols_A
In_Supplemental_Arrows_A
In_Braille_Patterns
In_Supplemental_Arrows_B
In_Miscellaneous_Mathematical_Symbols_B
In_Supplemental_Mathematical_Operators
In_Miscellaneous_Symbols_and_Arrows
In_Glagolitic
In_Latin_Extended_C
In_Coptic
In_Georgian_Supplement
In_Tifinagh
In_Ethiopic_Extended
In_Cyrillic_Extended_A
In_Supplemental_Punctuation
In_CJK_Radicals_Supplement
In_Kangxi_Radicals
In_Ideographic_Description_Characters
In_CJK_Symbols_and_Punctuation
In_Hiragana
In_Katakana
In_Bopomofo
In_Hangul_Compatibility_Jamo
In_Kanbun
In_Bopomofo_Extended
In_CJK_Strokes
In_Katakana_Phonetic_Extensions
In_Enclosed_CJK_Letters_and_Months
In_CJK_Compatibility
In_CJK_Unified_Ideographs_Extension_A
In_Yijing_Hexagram_Symbols
In_CJK_Unified_Ideographs
In_Yi_Syllables
In_Yi_Radicals
In_Lisu
In_Vai
In_Cyrillic_Extended_B
In_Bamum
In_Modifier_Tone_Letters
In_Latin_Extended_D
In_Syloti_Nagri
In_Common_Indic_Number_Forms
In_Phags_pa
In_Saurashtra
In_Devanagari_Extended
In_Kayah_Li
In_Rejang
In_Hangul_Jamo_Extended_A
In_Javanese
In_Myanmar_Extended_B
In_Cham
In_Myanmar_Extended_A
In_Tai_Viet
In_Meetei_Mayek_Extensions
In_Ethiopic_Extended_A
In_Latin_Extended_E
In_Cherokee_Supplement
In_Meetei_Mayek
In_Hangul_Syllables
In_Hangul_Jamo_Extended_B
In_High_Surrogates
In_High_Private_Use_Surrogates
In_Low_Surrogates
In_Private_Use_Area
In_CJK_Compatibility_Ideographs
In_Alphabetic_Presentation_Forms
In_Arabic_Presentation_Forms_A
In_Variation_Selectors
In_Vertical_Forms
In_Combining_Half_Marks
In_CJK_Compatibility_Forms
In_Small_Form_Variants
In_Arabic_Presentation_Forms_B
In_Halfwidth_and_Fullwidth_Forms
In_Specials
In_Linear_B_Syllabary
In_Linear_B_Ideograms
In_Aegean_Numbers
In_Ancient_Greek_Numbers
In_Ancient_Symbols
In_Phaistos_Disc
In_Lycian
In_Carian
In_Coptic_Epact_Numbers
In_Old_Italic
In_Gothic
In_Old_Permic
In_Ugaritic
In_Old_Persian
In_Deseret
In_Shavian
In_Osmanya
In_Osage
In_Elbasan
In_Caucasian_Albanian
In_Vithkuqi
In_Todhri
In_Linear_A
In_Latin_Extended_F
In_Cypriot_Syllabary
In_Imperial_Aramaic
In_Palmyrene
In_Nabataean
In_Hatran
In_Phoenician
In_Lydian
In_Meroitic_Hieroglyphs
In_Meroitic_Cursive
In_Kharoshthi
In_Old_South_Arabian
In_Old_North_Arabian
In_Manichaean
In_Avestan
In_Inscriptional_Parthian
In_Inscriptional_Pahlavi
In_Psalter_Pahlavi
In_Old_Turkic
In_Old_Hungarian
In_Hanifi_Rohingya
In_Garay
In_Rumi_Numeral_Symbols
In_Yezidi
In_Arabic_Extended_C
In_Old_Sogdian
In_Sogdian
In_Old_Uyghur
In_Chorasmian
In_Elymaic
In_Brahmi
In_Kaithi
In_Sora_Sompeng
In_Chakma
In_Mahajani
In_Sharada
In_Sinhala_Archaic_Numbers
In_Khojki
In_Multani
In_Khudawadi
In_Grantha
In_Tulu_Tigalari
In_Newa
In_Tirhuta
In_Siddham
In_Modi
In_Mongolian_Supplement
In_Takri
In_Myanmar_Extended_C
In_Ahom
In_Dogra
In_Warang_Citi
In_Dives_Akuru
In_Nandinagari
In_Zanabazar_Square
In_Soyombo
In_Unified_Canadian_Aboriginal_Syllabics_Extended_A
In_Pau_Cin_Hau
In_Devanagari_Extended_A
In_Sunuwar
In_Bhaiksuki
In_Marchen
In_Masaram_Gondi
In_Gunjala_Gondi
In_Makasar
In_Kawi
In_Lisu_Supplement
In_Tamil_Supplement
In_Cuneiform
In_Cuneiform_Numbers_and_Punctuation
In_Early_Dynastic_Cuneiform
In_Cypro_Minoan
In_Egyptian_Hieroglyphs
In_Egyptian_Hieroglyph_Format_Controls
In_Egyptian_Hieroglyphs_Extended_A
In_Anatolian_Hieroglyphs
In_Gurung_Khema
In_Bamum_Supplement
In_Mro
In_Tangsa
In_Bassa_Vah
In_Pahawh_Hmong
In_Kirat_Rai
In_Medefaidrin
In_Miao
In_Ideographic_Symbols_and_Punctuation
In_Tangut
In_Tangut_Components
In_Khitan_Small_Script
In_Tangut_Supplement
In_Kana_Extended_B
In_Kana_Supplement
In_Kana_Extended_A
In_Small_Kana_Extension
In_Nushu
In_Duployan
In_Shorthand_Format_Controls
In_Symbols_for_Legacy_Computing_Supplement
In_Znamenny_Musical_Notation
In_Byzantine_Musical_Symbols
In_Musical_Symbols
In_Ancient_Greek_Musical_Notation
In_Kaktovik_Numerals
In_Mayan_Numerals
In_Tai_Xuan_Jing_Symbols
In_Counting_Rod_Numerals
In_Mathematical_Alphanumeric_Symbols
In_Sutton_SignWriting
In_Latin_Extended_G
In_Glagolitic_Supplement
In_Cyrillic_Extended_D
In_Nyiakeng_Puachue_Hmong
In_Toto
In_Wancho
In_Nag_Mundari
In_Ol_Onal
In_Ethiopic_Extended_B
In_Mende_Kikakui
In_Adlam
In_Indic_Siyaq_Numbers
In_Ottoman_Siyaq_Numbers
In_Arabic_Mathematical_Alphabetic_Symbols
In_Mahjong_Tiles
In_Domino_Tiles
In_Playing_Cards
In_Enclosed_Alphanumeric_Supplement
In_Enclosed_Ideographic_Supplement
In_Miscellaneous_Symbols_and_Pictographs
In_Emoticons
In_Ornamental_Dingbats
In_Transport_and_Map_Symbols
In_Alchemical_Symbols
In_Geometric_Shapes_Extended
In_Supplemental_Arrows_C
In_Supplemental_Symbols_and_Pictographs
In_Chess_Symbols
In_Symbols_and_Pictographs_Extended_A
In_Symbols_for_Legacy_Computing
In_CJK_Unified_Ideographs_Extension_B
In_CJK_Unified_Ideographs_Extension_C
In_CJK_Unified_Ideographs_Extension_D
In_CJK_Unified_Ideographs_Extension_E
In_CJK_Unified_Ideographs_Extension_F
In_CJK_Unified_Ideographs_Extension_I
In_CJK_Compatibility_Ideographs_Supplement
In_CJK_Unified_Ideographs_Extension_G
In_CJK_Unified_Ideographs_Extension_H
In_Tags
In_Variation_Selectors_Supplement
In_Supplementary_Private_Use_Area_A
In_Supplementary_Private_Use_Area_B
In_No_Block`.split(/\s/).map(e=>[J(e),e]));function Te(e,r={}){if({}.toString.call(r)!=="[object Object]")throw new Error("Unexpected options");return E(e,{flags:r.flags??"",rules:{captureGroup:r.rules?.captureGroup??!1,singleline:r.rules?.singleline??!1},unicodePropertyMap:P})}function q(e,r,t=null){function a(o,n){for(let s=0;s<o.length;s++){let l=i(o[s],n,s,o);s=Math.max(-1,s+l)}}function i(o,n=null,s=null,l=null){let p=0,d=!1,f={node:o,parent:n,key:s,container:l,root:e,remove(){Z(l).splice(Math.max(0,O(s)+p),1),p--,d=!0},removeAllNextSiblings(){return Z(l).splice(O(s)+1)},removeAllPrevSiblings(){let m=O(s)+p;return p-=m,Z(l).splice(0,Math.max(0,m))},replaceWith(m,L={}){let re=!!L.traverse;l?l[Math.max(0,O(s)+p)]=m:b(n,"Can't replace root node")[s]=m,re&&i(m,n,s,l),d=!0},replaceWithMultiple(m,L={}){let re=!!L.traverse;if(Z(l).splice(Math.max(0,O(s)+p),1,...m),p+=m.length-1,re){let le=0;for(let j=0;j<m.length;j++)le+=i(m[j],n,O(s)+j+le,l)}d=!0},skip(){d=!0}},{type:c}=o,_=r["*"],h=r[c],g=typeof _=="function"?_:_?.enter,V=typeof h=="function"?h:h?.enter;if(g?.(f,t),V?.(f,t),!d)switch(c){case"AbsenceFunction":case"CapturingGroup":case"Group":a(o.body,o);break;case"Alternative":case"CharacterClass":a(o.body,o);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":i(o.min,o,"min"),i(o.max,o,"max");break;case"LookaroundAssertion":a(o.body,o);break;case"Quantifier":i(o.body,o,"body");break;case"Regex":a(o.body,o),i(o.flags,o,"flags");break;default:throw new Error(`Unexpected node type "${c}"`)}return h?.exit?.(f,t),_?.exit?.(f,t),p}return i(e),e}function Z(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function O(e){if(typeof e!="number")throw new Error("Numeric key expected");return e}var Pe={"*"({node:e}){if(!I(e))return;let r=[],t=[];for(let a of e.body){let i=a.body[0];a.body.length===1&&(i.type==="Character"||i.type==="CharacterClass"||i.type==="CharacterSet"&&at.has(i.kind))?t.push(i):(t.length&&(r.push(Ee(t)),t=[]),r.push(a))}t.length&&r.push(Ee(t)),e.body=r}};function Ee(e){let r=C(),t=e.length>1?$({body:e}):e[0];return t&&r.body.push(t),r}var at=new Set(["digit","hex","posix","property","space","word"]);var Oe={CapturingGroup({node:e,parent:r,replaceWithMultiple:t}){if(r.type==="Quantifier"||e.body.length>1||e.isSubroutined)return;let a=e.body[0],i=a.body,o=i[0],n=i.length>1?i.at(-1):null,s=o&&o.type==="Assertion",l=n&&n.type==="Assertion",p=s?1:0,d=i.length-(l?1:0);if(s||l){a.body=i.slice(p,d);let f=[];s&&f.push(o),f.push(e),l&&f.push(n),t(f,{traverse:!0})}}};var Me={"*"({node:e}){if(!I(e)||e.body.length<2)return;let r=[],t=!1,a=0;for(;!t;){r.push(e.body[0].body[a]);for(let n of e.body){let s=n.body[a];if(!s||!M(s.type)||!G(s,r[a])){t=!0;break}}a++}if(r.pop(),!r.length)return;for(let n of e.body)n.body=n.body.slice(r.length);let i=C({body:r}),o=A({body:e.body});o.body.every(n=>!n.body.length)||i.body.push(o),e.body=[i]}};function M(e){return e==="Assertion"||e==="Character"||e==="CharacterSet"}function G(e,r){if(e.type!==r.type)return!1;if(e.type==="Assertion"||e.type==="CharacterSet")return e.kind===r.kind&&e.negate===r.negate;if(e.type==="Character")return e.value===r.value;throw new Error(`Unexpected node type "${e.type}"`)}var Ge={"*"({node:e}){if(!I(e))return;let r=2,t=e.body.length;if(t<r*2||t%r)return;let a=[...e.body.slice(0,r).map(_=>_.body)],i=Array.from({length:r},()=>[]),o=Array(r).fill(!1),n=Math.max(...a.map(_=>_.length));for(let _=0;_<n;_++)for(let h=0;h<r;h++)if(!o[h]){let g=a[h][_];!g||!M(g.type)||!ot(g,e.body,h,_,r)?o[h]=!0:i[h].push(g)}if(!i.some(_=>_.length))return;let s=[],l=0;for(let _=0;_<t;_++)s.push(C({body:e.body[_].body.slice(i[l].length)})),l=l<r-1?l+1:0;for(let _=0;_<t/r;_++){let h=s.slice(_*r,_*r+r);for(let g=1;g<h.length;g++){let V=h[g].body;if(V.length!==h[0].body.length||!V.every((m,L)=>M(m.type)&&G(m,h[0].body[L])))return}}let p=[];for(let _=0;_<r;_++)p.push(C({body:i[_]}));let d=A({body:p}),f=C({body:[d]}),c=A({body:s.filter((_,h)=>h%r)});c.body.every(_=>!_.body.length)?e.body=d.body:(f.body.push(c),e.body=[f])}};function ot(e,r,t,a,i){for(let o=t;o<r.length;o+=i){let s=r[o].body[a];if(!s||!G(s,e))return!1}return!0}var Le={"*"({node:e}){if(!I(e)||e.body.length<2)return;let r=e.body[0].body,t=[],a=!1,i=0;for(;!a;){let s=r.length-1-i;t.push(r[s]);for(let l of e.body){let p=l.body.length-1-i,d=l.body[p];if(!d||!M(d.type)||!G(d,t[i])){a=!0;break}}i++}if(t.pop(),!t.length||t.length<3&&t[0].type!=="Assertion"&&t.length*(e.body.length-1)<4&&!e.body.some((s,l,p)=>{let d=p[l-1],f=t.length;return s.body.length-f<2&&d&&d.body.length-f<2}))return;t.reverse();for(let s of e.body)s.body=s.body.slice(0,-t.length);let o=C(),n=A({body:e.body});n.body.every(s=>!s.body.length)||o.body.push(n),o.body.push(...t),e.body=[o]}};var Ue={CharacterClass({node:e}){if(e.kind!=="union"||!e.body.length)return;let r=[];for(let n of e.body)n.type==="CharacterSet"&&r.some(s=>s.type===n.type&&s.kind===n.kind&&s.negate===n.negate&&s.value===n.value)||r.push(n);e.body=r;let t=[],a=[];for(let n of e.body)n.type==="Character"||n.type==="CharacterClassRange"?a.push(n):t.push(n);if(!a.length)return;a.sort((n,s)=>{let l=n.type==="Character"?n.value:n.min.value,p=s.type==="Character"?s.value:s.min.value;return l-p});let i=[a[0]];for(let n=1;n<a.length;n++){let s=a[n],l=i.at(-1),p=s.type==="Character"?s.value:s.min.value,d=l.type==="Character"?l.value:l.max.value;if(p<=d+1)if(l.type==="Character"&&s.type==="Character")l.value!==s.value&&(i[i.length-1]=W(l,s));else if(l.type==="Character"&&s.type==="CharacterClassRange")i[i.length-1]=W(D(l.value),s.max);else if(l.type==="CharacterClassRange"&&s.type==="Character")l.max.value=Math.max(s.value,l.max.value);else if(l.type==="CharacterClassRange"&&s.type==="CharacterClassRange")l.max.value=Math.max(s.max.value,l.max.value);else throw new Error("Unexpected merge case");else i.push(s)}let o=i.flatMap(n=>{if(n.type==="CharacterClassRange"){let s=n.max.value-n.min.value;if(n.min.value>262143&&s>1)return n;if(s){if(s===1)return[n.min,n.max];if(s===2)return[n.min,D(n.min.value+1),n.max]}else return n.min}return n});e.body=[...o.filter(n=>Fe(n)),...o.filter(n=>!Fe(n)),...t]}};function Fe(e){return e.type==="Character"&&(e.value===45||e.value===93)}var $e={Quantifier({node:e}){let{body:r,max:t}=e;if(t!==1/0||r.type!=="Group"||r.atomic)return;let a=r.body[0];if(!T(a,{type:"Quantifier"}))return;let i=a.body[0];i.kind==="possessive"||i.min>1||i.max<2||(i.min?i.min===1&&(a.body[0]=i.body):i.max=1)}};var De={AbsenceFunction({node:e,remove:r}){Y(e)&&r()},Group({node:e,remove:r}){Y(e)&&r()},LookaroundAssertion({node:e,remove:r}){Y(e)&&r()},Quantifier({node:e,remove:r}){let t=e.body;for(;t.type==="Quantifier";)t=t.body;Y(t)&&r()}};function ie(e){return e.body.every(r=>!r.body.length)}function Y(e){switch(e.type){case"AbsenceFunction":return e.kind==="repeater"&&ie(e);case"Group":return ie(e);case"LookaroundAssertion":return!e.negate&&ie(e);default:return!1}}var Be={Flags({node:e}){e.extended=!1},Directive({node:e,remove:r}){e.kind==="flags"&&(Re(e),Ke(e)&&r())},Group({node:e}){e.flags&&(Re(e),Ke(e))}};function Ke(e){let{flags:r}=e;return r&&!r.enable&&!r.disable?(delete e.flags,!0):!1}function Re({flags:e}){if(!e)throw new Error("Expected flags");e.enable&&delete e.enable.extended,e.disable&&delete e.disable.extended,it(e)}function it(e){e.enable&&!Object.keys(e.enable).length&&delete e.enable,e.disable&&!Object.keys(e.disable).length&&delete e.disable}var Ve={NamedCallout({node:e,replaceWith:r}){let{arguments:t,kind:a}=e;if(a==="fail"){r(oe({negate:!0}));return}if(!t)return;let i=t.filter(o=>o!=="").map(o=>typeof o=="string"&&/^[+-]?\d+$/.test(o)?+o:o);e.arguments=i.length?i:null}};var je={CharacterClass({node:e,parent:r,replaceWith:t,replaceWithMultiple:a}){let{body:i,kind:o,negate:n}=e;if(r.type!=="CharacterClass"||o!=="union"||!i.length)return;let s=i[0];if(T(r,{type:"CharacterClass",kind:"union"})){r.negate=r.negate!==n,a(i,{traverse:!0});return}n||(r.kind==="union"?a(i,{traverse:!0}):T(e)&&t(s,{traverse:!0}))}};var He={CharacterClass({node:e,parent:r,replaceWith:t}){let{body:a,kind:i,negate:o}=e;if(!o||i!=="union"||a.length!==1)return;let n=a[0];if(n.type==="CharacterSet")n.negate=!n.negate,t(n);else if(r.type!=="CharacterClass"&&n.type==="Character"&&n.value===10){if(r.type==="Quantifier"&&r.kind!=="lazy")return;t(k("newline",{negate:!0}))}}};var ze={CharacterClass({node:e,parent:r,replaceWith:t}){let{body:a,kind:i,negate:o}=e,n=a[0];r.type==="CharacterClass"||o||i!=="union"||a.length!==1||n.type!=="Character"&&n.type!=="CharacterSet"||t(n,{traverse:!0})}};var We={"*"({node:e}){I(e)&&st(e)&&(e.body=e.body[0].body[0].body)},Group({node:e,parent:r,replaceWithMultiple:t}){let{atomic:a,body:i,flags:o}=e,n=i[0].body;if(i.length>1||r.type==="Quantifier")return;let s=!1;a?n.every(({type:l})=>Qe.has(l))&&(s=!0):o||(s=!0),s&&t(n,{traverse:!0})},Quantifier({node:e}){if(e.body.type!=="Group")return;let r=e.body;if(r.body.length>1)return;let t=r.body[0].body;if(t.length!==1)return;let a=t[0];!Q(a)||r.atomic&&!Qe.has(a.type)||r.flags||(e.body=a)}},Qe=new Set(["Assertion","Backreference","Character","CharacterClass","CharacterSet","Directive","NamedCallout"]);function st({body:e}){let r=e[0].body;return e.length===1&&r.length===1&&r[0].type==="Group"&&!r[0].atomic&&!r[0].flags&&r[0].body.length>1}var Xe={CharacterSet({node:e,parent:r,root:t,replaceWith:a}){let{kind:i,negate:o,value:n}=e,s=null;i==="property"&&(n==="Decimal_Number"||n==="Nd")&&!t.flags.digitIsAscii&&!t.flags.posixIsAscii||i==="posix"&&n==="digit"?s=k("digit",{negate:o}):i==="property"&&(n==="ASCII_Hex_Digit"||n==="AHex")||i==="posix"&&n==="xdigit"?s=k("hex",{negate:o}):i==="property"&&(n==="White_Space"||n==="WSpace")&&!t.flags.spaceIsAscii&&!t.flags.posixIsAscii||i==="posix"&&n==="space"?s=k("space",{negate:o}):r.type!=="CharacterClass"&&i==="property"&&!o&&n==="Any"&&(s=k("any")),s&&a(s)},CharacterClass({node:e,root:r}){if(e.kind!=="union")return;let t={rangeDigit0To9:!1,rangeAToFLower:!1,rangeAToFUpper:!1,unicodeL:!1,unicodeM:!1,unicodeN:!1,unicodePc:!1};for(let a of e.body)a.type==="CharacterClassRange"?(t.rangeDigit0To9||=x(a,N.n0,N.n9),t.rangeAToFLower||=x(a,N.a,N.f),t.rangeAToFUpper||=x(a,N.A,N.F)):a.type==="CharacterSet"&&(t.unicodeL||=R(a,"L"),t.unicodeM||=R(a,"M"),t.unicodeN||=R(a,"N"),t.unicodePc||=R(a,"Pc",{includeSupercategories:!0}));t.rangeDigit0To9&&t.rangeAToFUpper&&t.rangeAToFLower&&(e.body=e.body.filter(a=>!(x(a,N.n0,N.n9)||x(a,N.a,N.f)||x(a,N.A,N.F))),e.body.push(k("hex"))),t.unicodeL&&t.unicodeM&&t.unicodeN&&t.unicodePc&&!r.flags.wordIsAscii&&!r.flags.posixIsAscii&&(e.body=e.body.filter(a=>!R(a,["L","M","N","Pc"],{includeSubcategories:!0})),e.body.push(k("word")))}},N={n0:y("0"),n9:y("9"),A:y("A"),F:y("F"),a:y("a"),f:y("f")};function x(e,r,t){return e.type==="CharacterClassRange"&&e.min.value===r&&e.max.value===t}function R(e,r,t={}){if(e.type!=="CharacterSet"||e.kind!=="property"||e.negate)return!1;let a=Array.isArray(r)?r:[r],i=[];for(let o of a){i.push(o);let n=B[o]?.full,s=Je[o],l=B[o]?.sub;n&&i.push(n),t.includeSupercategories&&s&&(i.push(s),i.push(B[s].full)),t.includeSubcategories&&l&&i.push(...l)}return i.includes(e.value)}var lt=["Ll","Lm","Lo","Lt","Lu"],ut=["Mc","Me","Mn"],pt=["Nd","Nl","No"],ct=["Pc","Pd","Pe","Pf","Pi","Po","Ps"],B={L:{full:"Letter",sub:lt},M:{full:"Mark",sub:ut},N:{full:"Number",sub:pt},P:{full:"Punctuation",sub:ct}},Je={};for(let e of Object.keys(B))for(let r of B[e].sub)Je[r]=e;var Ze={CharacterSet({node:e}){if(e.kind!=="property")return;let r=dt.get(e.value);r&&(e.value=r)}},dt=new Map([["Other","C"],["Control","Cc"],["Format","Cf"],["Unassigned","Cn"],["Private_Use","Co"],["Surrogate","Cs"],["Letter","L"],["Cased_Letter","LC"],["Lowercase_Letter","Ll"],["Modifier_Letter","Lm"],["Other_Letter","Lo"],["Titlecase_Letter","Lt"],["Uppercase_Letter","Lu"],["Mark","M"],["Combining_Mark","M"],["Spacing_Mark","Mc"],["Enclosing_Mark","Me"],["Nonspacing_Mark","Mn"],["Number","N"],["Decimal_Number","Nd"],["Letter_Number","Nl"],["Other_Number","No"],["Punctuation","P"],["punct","P"],["Connector_Punctuation","Pc"],["Dash_Punctuation","Pd"],["Close_Punctuation","Pe"],["Final_Punctuation","Pf"],["Initial_Punctuation","Pi"],["Other_Punctuation","Po"],["Open_Punctuation","Ps"],["Symbol","S"],["Currency_Symbol","Sc"],["Modifier_Symbol","Sk"],["Math_Symbol","Sm"],["Other_Symbol","So"],["Separator","Z"],["Line_Separator","Zl"],["Paragraph_Separator","Zp"],["Space_Separator","Zs"],["ASCII_Hex_Digit","AHex"],["Bidi_Control","Bidi_C"],["Case_Ignorable","CI"],["Changes_When_Casefolded","CWCF"],["Changes_When_Casemapped","CWCM"],["Changes_When_Lowercased","CWL"],["Changes_When_Titlecased","CWT"],["Changes_When_Uppercased","CWU"],["Default_Ignorable_Code_Point","DI"],["Deprecated","Dep"],["Diacritic","Dia"],["Emoji_Component","EComp"],["Emoji_Modifier","EMod"],["Emoji_Modifier_Base","EBase"],["Emoji_Presentation","EPres"],["Extended_Pictographic","ExtPict"],["Extender","Ext"],["Grapheme_Base","Gr_Base"],["Grapheme_Extend","Gr_Ext"],["Grapheme_Link","Gr_Link"],["Hex_Digit","Hex"],["IDS_Binary_Operator","IDSB"],["IDS_Trinary_Operator","IDST"],["IDS_Unary_Operator","IDSU"],["ID_Continue","IDC"],["ID_Start","IDS"],["Ideographic","Ideo"],["Join_Control","Join_C"],["Logical_Order_Exception","LOE"],["Noncharacter_Code_Point","NChar"],["Other_Alphabetic","OAlpha"],["Other_Default_Ignorable_Code_Point","ODI"],["Other_Grapheme_Extend","OGr_Ext"],["Other_ID_Continue","OIDC"],["Other_ID_Start","OIDS"],["Other_Lowercase","OLower"],["Other_Math","OMath"],["Other_Uppercase","OUpper"],["Pattern_Syntax","Pat_Syn"],["Pattern_White_Space","Pat_WS"],["Prepended_Concatenation_Mark","PCM"],["Quotation_Mark","QMark"],["Regional_Indicator","RI"],["Sentence_Terminal","STerm"],["Soft_Dotted","SD"],["Terminal_Punctuation","Term"],["Unified_Ideograph","UIdeo"],["Variation_Selector","VS"],["White_Space","WSpace"],["XID_Continue","XIDC"],["XID_Start","XIDS"]]);var qe={CharacterSet({node:e,root:r,replaceWith:t}){let{kind:a,negate:i,value:o}=e,n=null;a==="posix"&&o==="cntrl"&&!r.flags.posixIsAscii&&(n=X("Cc",{negate:i})),n&&t(n)},CharacterClassRange({node:e,replaceWith:r}){x(e,0,1114111)&&r(X("Any"))}};var ee=new Map([["alternationToClass",Pe],["exposeAnchors",Oe],["extractPrefix",Me],["extractPrefix2",Ge],["extractSuffix",Le],["preventReDoS",$e],["removeEmptyGroups",De],["removeUselessFlags",Be],["simplifyCallouts",Ve],["unnestUselessClasses",je],["unwrapNegationWrappers",He],["unwrapUselessClasses",ze],["unwrapUselessGroups",We],["useShorthands",Xe],["useUnicodeAliases",Ze],["useUnicodeProps",qe],["mergeRanges",Ue]]);function Ye(e,r){let t=ht(r),a=E(e,{flags:t.flags,rules:{captureGroup:t.rules.captureGroup,singleline:t.rules.singleline},skipBackrefValidation:t.rules.allowOrphanBackrefs,unicodePropertyMap:P}),i=Object.assign(se(),t.override);for(let l of ee.keys())i[l]||delete i[l];let o=Object.keys(i),n={pattern:e,flags:t.flags},s=0;do{if(++s>200)throw new Error("Optimization exceeded maximum iterations; possible infinite loop");e=n.pattern;for(let l of o)q(a,ee.get(l));n=H(a)}while(e!==n.pattern);return n}function ht(e={}){return{flags:"",override:{},...e,rules:{allowOrphanBackrefs:!1,captureGroup:!1,singleline:!1,...e.rules}}}function se(e={}){let r={};for(let t of ee.keys())r[t]=!e.disable;return r}return or(_t);})();
//# sourceMappingURL=oniguruma-parser.min.js.map
